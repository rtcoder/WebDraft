var select={hoverSelectRectangle:false,isSelecting:false,startSelectPoints:[0,0],initSelect:function(){select.startSelectPoints=[webDraft.mPosition.x,webDraft.mPosition.y]},startSelect:function(){if(select.startSelectPoints[0]<=webDraft.mPosition.x){var b=select.startSelectPoints[0],c=webDraft.mPosition.x-select.startSelectPoints[0]}else{var b=webDraft.mPosition.x,c=select.startSelectPoints[0]-webDraft.mPosition.x}if(select.startSelectPoints[1]<=webDraft.mPosition.y){var d=select.startSelectPoints[1],a=webDraft.mPosition.y-select.startSelectPoints[1]}else{var d=webDraft.mPosition.y,a=select.startSelectPoints[1]-webDraft.mPosition.y}$("#selectRectangle").show().css({top:d+"px",left:b+"px",width:c+"px",height:a+"px",border:"1px dashed #fff",background:"transparent"});select.isSelecting=true},selectOpt:function(){select.isSelecting=false},delSelectedPart:function(){if($("#selectRectangle").css("background-image")==="none"){xpos=parseInt($("#selectRectangle").css("left"));ypos=parseInt($("#selectRectangle").css("top"));ctx.clearRect(xpos,ypos,$("#selectRectangle").width(),$("#selectRectangle").height())}else{$("#selectRectangle").css({background:"transparent"})}layers.saveState();$("#selectRectangle").css({top:"0px",left:"0px",background:"transparent"}).width(0).height(0).hide()},copySelectedPart:function(){if($("#selectRectangle").css("background-image")==="none"){$(webDraft.draw.selectorId).append('<canvas id="tmpCanvas" width="'+$("#selectRectangle").width()+'" height="'+$("#selectRectangle").height()+'"></canvas>');var b=parseInt($("#selectRectangle").css("left"));var e=parseInt($("#selectRectangle").css("top"));var d=document.getElementById("tmpCanvas");var c=d.getContext("2d");c.drawImage(canvas,b,e,$("#selectRectangle").width(),$("#selectRectangle").height(),0,0,$("#selectRectangle").width(),$("#selectRectangle").height());var a=d.toDataURL();$("#tmpCanvas").remove();$("#selectRectangle").css({background:"url("+a+") -1px -1px no-repeat"})}},cutSelectedPart:function(){$(webDraft.draw.selectorId).append('<canvas id="tmpCanvas" width="'+$("#selectRectangle").width()+'" height="'+$("#selectRectangle").height()+'"></canvas>');var b=parseInt($("#selectRectangle").css("left"));var e=parseInt($("#selectRectangle").css("top"));var d=document.getElementById("tmpCanvas");var c=d.getContext("2d");c.drawImage(canvas,b,e,$("#selectRectangle").width(),$("#selectRectangle").height(),0,0,$("#selectRectangle").width(),$("#selectRectangle").height());var a=d.toDataURL();$("#tmpCanvas").remove();$("#selectRectangle").css({background:"url("+a+") -1px -1px no-repeat "});ctx.clearRect(b,e,$("#selectRectangle").width(),$("#selectRectangle").height());layers.saveState()},pasteSelectedPart:function(){if($("#selectRectangle").css("background-image")!=="none"){var b=parseInt($("#selectRectangle").css("left"));var d=parseInt($("#selectRectangle").css("top"));var a=new Image();var c=$("#selectRectangle").css("background-image").replace("url(","").replace(")","").replace('"',"").replace('"',"");a.onload=function(){ctx.drawImage(a,b,d);layers.saveState()};a.src=c;$("#selectRectangle").css({top:"0px",left:"0px",background:"transparent"}).width(0).height(0).hide()}}};